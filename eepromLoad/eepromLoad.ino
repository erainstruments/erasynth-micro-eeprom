#include <SPI.h>

#define eeprom_LE 5
#define ledPin 13
#define maxSamplesNum 120

#define EEPROM_START_ADDR 20
#define VERSION_SIZE 10
#define VERSION_ADDR 2

#define EXTERNAL_EEPROM_READ 0x03
#define EXTERNAL_EEPROM_WRITE 0x02
#define EXTERNAL_EEPROM_WREN 0x06
#define EXTERNAL_EEPROM_MAX_CLOCK 5e6

#define LMX_CAL_15 32000
#define LMX_CAL_21 33000
#define F2250_CAL_15 34000
#define F2250_CAL_14 36000
#define F2250_CAL_13 38000
#define F2250_CAL_12 40000
#define F2250_CAL_11 42000
#define F2250_CAL_10 44000
#define F2250_CAL_21 46000

#define LMX_REG_ADDR 51
#define ADF_REG_ADDR 500

#define SINE_WAVEFORM_ADDR 601
#define RAMP_WAVEFORM_ADDR 1001
#define SQUARE_WAVEFORM_ADDR 1401
#define TRIANGLE_WAVEFORM_ADDR 1801

#define SETTINGS_ADDR 2201
#define SETTINGS_LENGTH 800
#define INITIATION_ADDR 0
#define REMEMBER_ADDR 1
uint8_t ledState = LOW;

uint8_t init_ADF4002_Initialization[3]  = { 0x20, 0x00, 0x93 };
uint8_t init_ADF4002_Function[3]    = { 0x20, 0x00, 0x92 }; //CP Current=0.294 (11K)
uint8_t init_ADF4002_R_Counter[3]   = { 0x00, 0x05, 0x01 }; //RDiv=1
uint8_t init_ADF4002_N_Counter[3]   = { 0x10, 0x00, 0x04 };

const uint16_t LMX_register[126] = {0x211C,0x0808,0x0500,0x0782,0x0A43,0x30C8,0xC802,0x00B2,0x2000,0x1004,0x10F8,0xB018,0x5001,0x4000,0x1878,0x060E,0x0080,0x0096,0x0064,0x27B7,0x4848,0x0409,0x0001,0x007C,0x071A,0x0624,0x0808,0x0002,0x0488,0x0000,0x18A6,0xC3E6,0x05BF,0x1E01,0x0010,0x0004,0x0028,0x0205,0x05F5,0xE100,0x0000,0x0000,0x0000,0x0000,0x01A3,0xC601,0x07F1,0x0300,0x03E0,0x4180,0x0080,0x0080,0x0421,0x0000,0x0000,0x0000,0x0000,0x0020,0x9001,0x0001,0x03E8,0x00A8,0x00AF,0x0000,0x1388,0x0000,0x01F4,0x0000,0x03E8,0x0000,0xC350,0x0081,0x0001,0x003F,0x0000,0x0840,0x000C,0x0000,0x0001,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x4440,0x0007,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x7802,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x2288};

const int sine_waveform[maxSamplesNum] = {0xfff, 0xffc, 0xff3, 0xfe5, 0xfd2, 0xfb9, 0xf9a, 0xf77, 0xf4d, 0xf1f, 0xeec, 0xeb4, 0xe77, 0xe36, 0xdf1, 0xda7, 0xd59, 0xd08, 0xcb2, 0xc5a, 0xbff, 0xba1, 0xb40, 0xadd, 0xa78, 0xa11, 0x9a9, 0x93f, 0x8d5, 0x86a, 0x7ff, 0x794, 0x729, 0x6bf, 0x655, 0x5ed, 0x586, 0x521, 0x4be, 0x45d, 0x3ff, 0x3a4, 0x34c, 0x2f6, 0x2a5, 0x257, 0x20d, 0x1c8, 0x187, 0x14a, 0x112, 0xdf, 0xb1, 0x87, 0x64, 0x45, 0x2c, 0x19, 0xb, 0x2, 0x0, 0x2, 0xb, 0x19, 0x2c, 0x45, 0x64, 0x87, 0xb1, 0xdf, 0x112, 0x14a, 0x187, 0x1c8, 0x20d, 0x257, 0x2a5, 0x2f6, 0x34c, 0x3a4, 0x3ff, 0x45d, 0x4be, 0x521, 0x586, 0x5ed, 0x655, 0x6bf, 0x729, 0x794, 0x7ff, 0x86a, 0x8d5, 0x93f, 0x9a9, 0xa11, 0xa78, 0xadd, 0xb40, 0xba1, 0xbff, 0xc5a, 0xcb2, 0xd08, 0xd59, 0xda7, 0xdf1, 0xe36, 0xe77, 0xeb4, 0xeec, 0xf1f, 0xf4d, 0xf77, 0xf9a, 0xfb9, 0xfd2, 0xfe5, 0xff3, 0xffc };
const int triangular_waveform[maxSamplesNum] = {0x44, 0x88, 0xcc, 0x110, 0x154, 0x198, 0x1dc, 0x220, 0x264, 0x2a8, 0x2ec, 0x330, 0x374, 0x3b8, 0x3fc, 0x440, 0x484, 0x4c8, 0x50c, 0x550, 0x594, 0x5d8, 0x61c, 0x660, 0x6a4, 0x6e8, 0x72c, 0x770, 0x7b4, 0x7f8, 0x83c, 0x880, 0x8c4, 0x908, 0x94c, 0x990, 0x9d4, 0xa18, 0xa5c, 0xaa0, 0xae4, 0xb28, 0xb6c, 0xbb0, 0xbf4, 0xc38, 0xc7c, 0xcc0, 0xd04, 0xd48, 0xd8c, 0xdd0, 0xe14, 0xe58, 0xe9c, 0xee0, 0xf24, 0xf68, 0xfac, 0xff0, 0xfac, 0xf68, 0xf24, 0xee0, 0xe9c, 0xe58, 0xe14, 0xdd0, 0xd8c, 0xd48, 0xd04, 0xcc0, 0xc7c, 0xc38, 0xbf4, 0xbb0, 0xb6c, 0xb28, 0xae4, 0xaa0, 0xa5c, 0xa18, 0x9d4, 0x990, 0x94c, 0x908, 0x8c4, 0x880, 0x83c, 0x7f8, 0x7b4, 0x770, 0x72c, 0x6e8, 0x6a4, 0x660, 0x61c, 0x5d8, 0x594, 0x550, 0x50c, 0x4c8, 0x484, 0x440, 0x3fc, 0x3b8, 0x374, 0x330, 0x2ec, 0x2a8, 0x264, 0x220, 0x1dc, 0x198, 0x154, 0x110, 0xcc, 0x88, 0x44, 0x0 };
const int ramp_waveform[maxSamplesNum] = {0x22, 0x44, 0x66, 0x88, 0xaa, 0xcc, 0xee, 0x110, 0x132, 0x154, 0x176, 0x198, 0x1ba, 0x1dc, 0x1fe, 0x220, 0x242, 0x264, 0x286, 0x2a8, 0x2ca, 0x2ec, 0x30e, 0x330, 0x352, 0x374, 0x396, 0x3b8, 0x3da, 0x3fc, 0x41e, 0x440, 0x462, 0x484, 0x4a6, 0x4c8, 0x4ea, 0x50c, 0x52e, 0x550, 0x572, 0x594, 0x5b6, 0x5d8, 0x5fa, 0x61c, 0x63e, 0x660, 0x682, 0x6a4, 0x6c6, 0x6e8, 0x70a, 0x72c, 0x74e, 0x770, 0x792, 0x7b4, 0x7d6, 0x7f8, 0x81a, 0x83c, 0x85e, 0x880, 0x8a2, 0x8c4, 0x8e6, 0x908, 0x92a, 0x94c, 0x96e, 0x990, 0x9b2, 0x9d4, 0x9f6, 0xa18, 0xa3a, 0xa5c, 0xa7e, 0xaa0, 0xac2, 0xae4, 0xb06, 0xb28, 0xb4a, 0xb6c, 0xb8e, 0xbb0, 0xbd2, 0xbf4, 0xc16, 0xc38, 0xc5a, 0xc7c, 0xc9e, 0xcc0, 0xce2, 0xd04, 0xd26, 0xd48, 0xd6a, 0xd8c, 0xdae, 0xdd0, 0xdf2, 0xe14, 0xe36, 0xe58, 0xe7a, 0xe9c, 0xebe, 0xee0, 0xf02, 0xf24, 0xf46, 0xf68, 0xf8a, 0xfac, 0xfce, 0xff0 };
const int square_waveform[maxSamplesNum] = { 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 };

const uint8_t PROGMEM lmx_15_cal[640]{6,6,5,7,5,5,7,6,6,5,7,7,5,7,7,6,7,6,7,5,6,6,5,6,6,7,6,6,6,7,5,7,6,5,6,6,7,5,6,6,7,7,5,6,5,7,7,5,6,5,6,7,6,7,7,7,6,7,7,7,7,7,6,7,7,6,7,6,7,7,7,7,7,7,7,7,6,7,8,6,7,7,7,7,7,7,7,7,7,7,7,9,8,9,7,7,8,7,7,8,8,7,7,9,8,8,8,8,8,7,7,8,8,8,9,9,9,8,8,9,7,8,9,9,9,9,9,8,7,8,8,9,9,8,8,8,8,7,9,8,8,8,9,8,8,8,9,8,9,8,8,10,10,9,9,9,10,9,8,8,8,10,9,9,9,9,9,9,9,9,8,8,9,9,9,8,10,9,9,9,8,9,8,8,9,10,9,9,9,9,9,9,8,9,8,9,8,9,8,9,9,8,9,9,9,10,9,9,9,10,9,9,10,9,10,10,10,11,10,10,9,9,9,9,10,9,8,10,9,9,10,9,9,9,8,9,9,8,9,10,8,10,10,10,10,9,9,9,8,10,9,10,10,8,9,10,9,9,9,9,9,9,9,9,8,8,10,9,10,10,10,10,10,11,10,10,10,10,11,11,10,11,10,10,10,10,10,10,10,10,10,11,11,10,11,11,10,11,11,12,11,11,12,10,11,11,12,10,12,12,12,11,12,12,11,13,12,12,13,12,13,12,12,13,13,13,12,14,12,14,13,12,14,14,14,13,14,13,14,14,13,12,14,14,14,13,13,13,13,13,14,14,13,14,14,14,15,14,14,15,13,14,13,14,14,14,15,14,14,16,15,15,15,16,16,16,17,17,17,17,17,16,17,17,17,18,16,16,17,17,16,17,18,17,18,18,17,19,18,18,19,19,20,19,21,21,21,21,21,21,21,21,19,19,21,21,21,21,20,21,22,21,21,21,20,21,20,21,20,22,20,23,21,23,23,22,24,23,23,23,23,23,24,24,25,24,25,25,25,26,25,24,23,24,25,26,24,25,26,27,27,29,29,29,30,30,30,31,30,30,28,29,30,29,28,28,28,28,29,29,28,29,30,30,31,31,32,32,32,32,33,31,31,31,30,29,31,30,31,30,30,29,30,30,31,31,29,30,28,30,28,29,29,28,30,30,29,29,29,31,30,30,29,30,30,30,30,32,31,30,30,31,32,30,31,31,31,30,29,29,30,30,29,28,28,29,29,29,30,30,30,32,33,33,34,34,34,36,36,36,36,36,36,35,35,35,35,35,35,36,35,36,36,37,38,40,40,41,41,42,42,44,43,44,44,43,43,41,41,40,42,40,40,40,38,38,37,36,36,36,34,32,33,34,33,34,35,35,36,36,38,40,42,41,41,41,42,40,41,41,39,37,37,37,38,39,38,40,40,41,42,43,46,46,49,49,52,54,57,59};
const uint8_t PROGMEM lmx_21_cal[640]{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7};

const uint16_t PROGMEM f2250_15dBm[640]{1014,1014,923,1108,929,927,1103,1026,1019,914,1097,1096,905,1092,1093,1018,1093,1015,1088,909,1019,1017,900,1014,1014,1087,1010,1005,999,1075,839,1070,991,811,986,981,1059,802,971,978,1056,1058,802,973,801,1054,1053,800,968,801,960,1039,951,1029,1025,1021,931,1014,1011,1008,1005,1003,909,1004,1003,905,998,899,994,990,986,981,979,976,971,965,801,959,1071,801,955,952,948,946,946,945,941,937,935,929,921,1090,1032,1083,899,899,1028,896,897,1026,1026,893,889,1074,1015,1013,1009,1004,999,831,820,989,986,982,1034,1033,1033,978,975,1028,801,978,1029,1028,1024,1021,1018,963,801,957,953,1002,1002,951,948,944,941,801,995,945,944,942,991,941,941,940,993,941,990,936,931,1025,1024,976,977,977,1018,969,907,910,908,1012,964,964,964,965,966,965,966,964,906,903,963,961,958,884,1000,951,949,947,861,946,860,857,944,993,943,939,937,936,934,932,802,933,801,925,800,919,801,928,930,801,934,935,934,988,929,926,919,976,910,904,967,894,962,960,957,1006,960,964,904,914,920,925,985,929,801,985,923,922,981,917,915,914,800,916,919,801,921,982,801,986,987,988,989,935,937,932,801,986,928,983,981,801,917,976,913,916,919,921,918,919,919,918,801,800,971,908,970,968,965,963,961,1002,951,945,942,941,987,984,934,980,930,928,925,920,917,916,914,909,904,961,959,895,956,950,865,941,940,993,932,927,988,801,923,901,971,800,965,961,955,828,941,936,802,969,923,920,965,901,955,901,897,950,945,947,891,987,893,983,947,883,981,981,979,940,974,932,969,966,922,801,958,955,951,897,892,887,880,876,931,926,829,922,920,919,957,920,923,962,835,922,804,915,914,911,948,894,878,972,921,912,899,947,939,928,950,940,938,929,920,824,896,883,873,918,800,800,848,862,801,866,919,845,907,896,802,925,854,801,852,801,875,801,911,896,877,884,888,898,908,918,801,801,921,912,909,901,801,862,906,846,839,828,800,822,800,802,800,891,800,916,800,900,895,802,925,855,845,807,801,800,846,811,863,801,837,843,856,901,867,805,800,827,878,908,801,801,821,834,800,882,822,800,800,801,800,802,801,801,800,801,840,809,801,800,801,801,862,851,801,801,806,801,800,801,801,801,801,801,801,800,800,801,800,800,801,800,801,801,801,800,800,801,861,862,801,810,800,824,800,802,801,800,801,801,800,801,800,801,801,801,801,800,801,802,801,883,801,801,801,801,861,801,801,802,801,800,800,800,800,801,800,800,800,801,801,802,801,801,801,849,846,806,806,802,800,801,801,801,800,800,800,800,800,800,800,800,800,800,800,800,800,801,800,836,806,810,801,801,801,829,801,831,804,800,800,801,801,802,800,800,800,800,800,800,800,800,800,802,800,800,800,802,801,801,824,812,852,821,842,865,875,814,801,801,801,800,800,800,800,800,800,800,800,801,800,801,800,800,800,801,801,802,814,801,803,802,800,801};
const uint16_t PROGMEM f2250_14dBm[640]{1070,1070,982,1161,985,983,1151,1072,1067,974,1142,1141,970,1135,1137,1065,1137,1062,1133,972,1067,1065,965,1062,1061,1131,1056,1053,1049,1120,941,1115,1040,934,1036,1031,1104,915,1022,1027,1101,1102,916,1022,915,1099,1098,914,1018,895,1011,1083,1002,1076,1074,1070,987,1064,1062,1058,1056,1054,973,1054,1053,970,1050,967,1047,1043,1037,1034,1031,1028,1023,1019,925,1011,1118,928,1009,1005,1003,1002,1000,1000,996,995,993,987,981,1141,1084,1133,967,966,1081,965,965,1079,1077,961,959,1125,1069,1067,1061,1058,1054,933,930,1044,1040,1037,1088,1088,1088,1033,1029,1083,913,1030,1084,1081,1079,1076,1072,1017,896,1011,1009,1060,1060,1006,1003,1001,998,876,1052,1001,999,996,1048,995,995,994,1048,994,1045,991,989,1083,1081,1031,1032,1031,1077,1025,971,974,972,1071,1024,1023,1024,1023,1024,1023,1022,1021,972,970,1020,1018,1017,962,1061,1011,1010,1010,955,1008,954,954,1009,1056,1006,1003,1001,1000,998,997,941,998,939,993,933,990,933,995,996,939,999,1001,999,1048,995,994,988,1038,985,980,1031,979,1026,1028,1025,1071,1028,1031,983,987,989,991,1044,990,925,1041,987,986,1037,984,984,983,915,984,987,920,986,1038,922,1040,1042,1041,1042,991,993,990,926,1038,986,1035,1034,917,980,1028,976,977,978,979,978,977,977,976,907,906,1022,972,1019,1018,1015,1015,1012,1052,1003,998,995,995,1036,1033,988,1031,985,983,980,978,976,974,973,970,968,1011,1009,964,1006,1002,952,993,992,1043,987,984,1036,930,980,968,1022,906,1016,1012,1006,943,996,992,927,1022,983,981,1018,971,1008,971,970,1003,1001,1001,967,1037,967,1033,1000,962,1032,1032,1030,995,1027,989,1022,1019,983,940,1012,1009,1006,969,967,964,963,961,989,985,949,983,983,981,1010,982,982,1013,950,982,945,978,977,976,1002,969,963,1025,983,978,972,1006,1000,993,1010,1006,1004,999,993,963,983,977,975,995,940,937,964,967,940,968,991,962,986,981,951,998,969,959,973,961,984,951,1000,993,986,987,987,989,992,995,942,939,993,990,988,983,954,971,988,965,963,960,931,958,927,953,922,976,922,990,938,982,980,951,998,966,963,957,947,942,967,961,973,949,967,966,970,986,970,954,918,957,974,988,943,954,961,967,957,987,973,962,971,964,959,971,958,961,927,949,969,960,948,951,952,952,969,965,939,950,958,948,954,943,966,961,957,953,968,939,941,943,927,913,955,941,958,946,949,935,953,953,969,971,938,954,925,958,922,936,931,911,948,944,925,927,923,953,941,941,923,939,938,938,937,977,949,933,932,943,968,922,934,932,931,914,891,898,916,918,907,893,896,920,922,924,938,932,928,962,963,957,959,952,947,967,959,952,950,949,949,929,930,932,935,937,939,958,942,959,956,962,970,993,988,992,989,994,989,1010,998,1012,1009,995,995,984,989,981,996,977,975,976,960,963,959,952,956,964,947,930,947,962,951,962,969,967,979,972,981,993,999,987,982,975,979,958,963,961,947,934,937,937,943,947,938,962,958,959,961,960,978,971,990,982,997,998,1010,1011};
const uint16_t PROGMEM f2250_13dBm[640]{1129,1129,1033,1223,1034,1031,1203,1116,1110,1023,1190,1190,1018,1184,1184,1109,1185,1104,1181,1020,1108,1108,1014,1104,1103,1178,1101,1097,1093,1164,993,1161,1086,988,1081,1076,1150,975,1068,1075,1146,1147,975,1070,973,1143,1144,973,1066,963,1060,1128,1050,1120,1117,1115,1036,1109,1107,1104,1102,1099,1024,1100,1099,1021,1097,1017,1092,1089,1086,1081,1079,1078,1073,1069,982,1062,1168,982,1060,1057,1055,1052,1051,1052,1048,1046,1044,1042,1033,1197,1132,1189,1018,1019,1128,1017,1016,1128,1127,1012,1010,1178,1118,1115,1110,1107,1100,986,984,1093,1090,1086,1139,1137,1138,1083,1081,1134,970,1082,1132,1129,1127,1124,1121,1068,957,1060,1059,1107,1108,1056,1053,1050,1049,944,1102,1049,1048,1047,1097,1044,1044,1044,1096,1044,1093,1040,1036,1131,1130,1082,1082,1081,1126,1076,1021,1024,1022,1120,1074,1074,1075,1073,1073,1073,1073,1071,1019,1020,1072,1069,1067,1012,1110,1064,1063,1061,1007,1061,1006,1006,1060,1106,1057,1056,1054,1053,1053,1052,996,1051,996,1048,989,1045,991,1050,1052,994,1053,1054,1052,1099,1048,1045,1042,1088,1039,1036,1083,1032,1080,1080,1079,1122,1080,1083,1037,1040,1043,1044,1094,1043,984,1090,1038,1039,1088,1036,1035,1036,977,1037,1037,981,1038,1087,982,1088,1090,1088,1089,1043,1042,1040,982,1085,1037,1082,1080,977,1029,1074,1026,1026,1027,1028,1026,1026,1027,1026,967,966,1068,1019,1067,1065,1063,1060,1059,1095,1051,1045,1044,1042,1080,1079,1036,1075,1031,1030,1028,1024,1023,1023,1021,1018,1016,1058,1057,1011,1053,1049,1002,1041,1040,1087,1035,1031,1081,984,1028,1017,1067,969,1062,1060,1053,994,1045,1041,984,1069,1032,1031,1065,1022,1057,1020,1019,1051,1049,1050,1014,1082,1015,1079,1048,1011,1078,1077,1075,1043,1073,1039,1069,1065,1031,993,1058,1055,1054,1021,1017,1016,1013,1011,1036,1034,999,1030,1030,1029,1057,1030,1031,1060,999,1030,997,1025,1024,1024,1049,1016,1011,1070,1030,1026,1021,1052,1047,1040,1059,1053,1053,1049,1043,1015,1035,1031,1026,1046,996,994,1018,1020,995,1020,1042,1016,1037,1032,1006,1049,1023,1014,1029,1020,1042,1010,1056,1050,1044,1044,1044,1044,1047,1050,1002,999,1049,1043,1043,1040,1012,1026,1043,1021,1020,1018,993,1014,991,1010,987,1032,988,1045,999,1038,1037,1010,1054,1024,1021,1015,1010,1004,1027,1022,1034,1012,1027,1028,1029,1044,1030,1016,986,1016,1031,1044,1005,1015,1023,1027,1020,1048,1038,1028,1037,1031,1026,1036,1023,1026,997,1014,1032,1022,1011,1015,1014,1014,1030,1026,1004,1012,1021,1013,1019,1011,1032,1027,1023,1020,1032,1008,1009,1009,999,987,1020,1009,1023,1012,1013,1001,1017,1018,1032,1032,1003,1018,992,1019,989,1001,997,984,1010,1008,995,994,991,1017,1006,1005,990,1005,1002,1002,1002,1037,1009,997,996,1005,1029,988,999,997,995,983,970,973,985,986,978,967,971,984,986,985,998,994,990,1021,1023,1016,1021,1015,1012,1033,1027,1023,1021,1021,1021,1003,1004,1007,1008,1010,1011,1029,1013,1030,1027,1034,1042,1064,1061,1066,1063,1070,1066,1087,1075,1086,1086,1071,1074,1063,1064,1057,1071,1055,1053,1054,1036,1039,1033,1028,1029,1033,1018,1001,1015,1027,1016,1025,1033,1031,1042,1038,1045,1060,1069,1056,1053,1049,1053,1034,1039,1036,1019,1006,1007,1007,1011,1014,1005,1027,1023,1024,1026,1026,1047,1043,1062,1055,1071,1075,1089,1092};
const uint16_t PROGMEM f2250_12dBm[640]{1225,1225,1081,1291,1080,1078,1254,1163,1154,1070,1241,1240,1064,1235,1233,1151,1234,1149,1231,1066,1152,1151,1061,1149,1147,1229,1144,1139,1136,1215,1041,1211,1128,1037,1124,1121,1199,1023,1110,1118,1197,1196,1024,1112,1022,1194,1194,1022,1109,1011,1103,1177,1095,1168,1164,1161,1083,1155,1154,1149,1147,1145,1070,1146,1144,1069,1141,1065,1138,1133,1130,1126,1125,1122,1119,1112,1033,1108,1221,1034,1107,1103,1101,1099,1099,1098,1096,1092,1092,1088,1082,1250,1185,1243,1069,1068,1182,1067,1066,1180,1178,1061,1059,1235,1168,1165,1162,1157,1151,1036,1034,1141,1139,1135,1194,1194,1193,1130,1126,1186,1019,1128,1188,1184,1181,1178,1174,1113,1004,1107,1106,1158,1157,1103,1101,1099,1096,992,1150,1096,1096,1094,1146,1091,1093,1092,1144,1091,1142,1088,1083,1186,1183,1129,1128,1128,1178,1123,1068,1071,1071,1174,1121,1121,1122,1120,1122,1120,1118,1118,1067,1068,1117,1115,1115,1061,1161,1110,1109,1108,1055,1107,1054,1055,1108,1156,1105,1103,1100,1100,1099,1100,1044,1100,1045,1095,1041,1094,1040,1097,1099,1045,1101,1101,1100,1146,1095,1092,1090,1136,1085,1085,1130,1081,1127,1127,1126,1174,1128,1130,1085,1089,1089,1091,1140,1090,1033,1135,1087,1087,1131,1084,1084,1083,1028,1084,1084,1030,1084,1132,1032,1132,1132,1133,1133,1087,1089,1085,1030,1128,1082,1125,1125,1024,1075,1118,1072,1071,1073,1073,1072,1071,1072,1070,1015,1013,1110,1064,1109,1108,1104,1103,1101,1138,1094,1089,1086,1087,1122,1121,1080,1118,1075,1075,1073,1070,1067,1068,1065,1065,1063,1101,1099,1059,1096,1092,1049,1084,1084,1129,1078,1076,1122,1031,1072,1063,1108,1016,1104,1102,1097,1042,1088,1085,1031,1110,1076,1076,1107,1067,1099,1066,1065,1095,1093,1093,1060,1123,1061,1120,1090,1058,1118,1118,1116,1085,1114,1082,1109,1106,1076,1041,1102,1099,1097,1066,1062,1060,1057,1055,1081,1077,1045,1074,1074,1071,1096,1073,1074,1099,1045,1073,1041,1069,1068,1067,1090,1061,1056,1109,1073,1070,1065,1094,1087,1083,1098,1095,1094,1088,1086,1059,1078,1074,1071,1088,1043,1042,1063,1065,1042,1065,1084,1062,1079,1077,1053,1091,1068,1060,1074,1068,1086,1058,1099,1093,1089,1090,1089,1090,1091,1095,1051,1049,1091,1089,1088,1085,1062,1074,1090,1071,1068,1068,1045,1065,1044,1062,1040,1079,1041,1091,1053,1084,1084,1064,1100,1075,1073,1066,1061,1058,1077,1073,1084,1065,1078,1078,1080,1094,1079,1067,1041,1068,1081,1093,1059,1068,1074,1079,1073,1098,1090,1080,1089,1085,1080,1090,1079,1080,1055,1069,1085,1076,1066,1068,1068,1069,1081,1079,1060,1068,1076,1068,1074,1068,1084,1082,1077,1076,1086,1065,1065,1067,1057,1046,1074,1064,1077,1068,1069,1057,1072,1072,1085,1085,1059,1072,1049,1073,1045,1057,1054,1041,1067,1064,1050,1050,1048,1072,1060,1060,1048,1058,1058,1057,1056,1089,1064,1051,1050,1061,1081,1044,1053,1052,1051,1039,1026,1027,1039,1039,1031,1023,1024,1039,1039,1040,1052,1047,1045,1074,1076,1070,1075,1070,1067,1086,1081,1080,1077,1078,1078,1062,1063,1065,1067,1068,1069,1085,1071,1084,1083,1090,1098,1118,1115,1123,1119,1126,1124,1145,1133,1146,1145,1131,1132,1120,1122,1115,1129,1112,1110,1112,1095,1097,1091,1084,1085,1090,1073,1058,1069,1079,1070,1079,1085,1083,1094,1090,1098,1111,1120,1110,1106,1103,1107,1090,1094,1093,1076,1063,1062,1062,1065,1069,1061,1080,1075,1077,1080,1082,1100,1096,1115,1110,1126,1133,1148,1153};
const uint16_t PROGMEM f2250_11dBm[640]{1356,1356,1129,1362,1123,1121,1307,1214,1205,1111,1288,1285,1106,1280,1279,1200,1278,1197,1276,1108,1200,1198,1105,1197,1196,1272,1192,1188,1184,1261,1085,1257,1174,1081,1171,1166,1247,1068,1157,1163,1244,1245,1070,1159,1069,1241,1241,1067,1154,1057,1148,1228,1138,1218,1216,1212,1126,1206,1205,1201,1198,1197,1114,1197,1196,1113,1191,1110,1190,1185,1180,1176,1173,1171,1166,1161,1079,1155,1270,1081,1154,1151,1149,1146,1145,1145,1143,1140,1138,1135,1128,1300,1238,1294,1116,1116,1236,1113,1112,1233,1233,1109,1106,1285,1222,1220,1216,1211,1206,1084,1082,1197,1193,1188,1248,1247,1247,1183,1180,1243,1066,1181,1241,1238,1236,1233,1230,1164,1051,1158,1153,1213,1213,1151,1148,1146,1145,1037,1205,1143,1141,1140,1198,1138,1138,1137,1197,1137,1195,1133,1130,1241,1237,1182,1180,1180,1234,1172,1113,1116,1115,1227,1171,1171,1173,1171,1170,1169,1169,1169,1112,1112,1166,1165,1163,1107,1216,1159,1158,1157,1101,1156,1100,1100,1155,1210,1153,1151,1148,1148,1145,1145,1093,1146,1091,1143,1087,1141,1088,1145,1145,1092,1147,1147,1146,1198,1141,1139,1135,1187,1132,1130,1181,1128,1179,1179,1177,1227,1178,1182,1130,1135,1134,1136,1190,1135,1082,1187,1131,1131,1182,1127,1128,1128,1076,1128,1128,1078,1130,1181,1078,1181,1181,1181,1181,1131,1131,1128,1077,1176,1126,1172,1171,1071,1117,1163,1113,1114,1116,1115,1114,1112,1113,1112,1062,1060,1154,1106,1151,1151,1148,1146,1143,1184,1135,1131,1129,1128,1167,1166,1122,1161,1117,1116,1114,1111,1111,1109,1107,1106,1105,1143,1142,1100,1139,1133,1090,1125,1125,1176,1120,1116,1167,1076,1113,1103,1152,1060,1147,1144,1139,1087,1128,1125,1075,1154,1118,1117,1151,1108,1141,1107,1107,1137,1135,1134,1103,1168,1102,1164,1131,1098,1162,1161,1160,1126,1156,1121,1150,1147,1117,1084,1141,1138,1137,1105,1104,1100,1099,1096,1119,1117,1087,1114,1112,1111,1137,1111,1112,1138,1085,1112,1082,1108,1108,1106,1127,1099,1094,1150,1112,1108,1103,1130,1125,1121,1138,1132,1133,1128,1124,1099,1117,1112,1109,1126,1085,1084,1101,1104,1083,1103,1123,1101,1117,1116,1093,1131,1108,1101,1115,1107,1127,1101,1141,1136,1131,1131,1131,1130,1133,1136,1093,1091,1133,1130,1129,1126,1103,1118,1131,1113,1112,1110,1090,1109,1088,1104,1086,1122,1087,1135,1096,1128,1127,1107,1147,1118,1116,1113,1105,1102,1123,1118,1129,1110,1123,1124,1124,1139,1124,1112,1090,1114,1126,1139,1105,1112,1120,1126,1119,1146,1136,1128,1137,1132,1126,1137,1125,1127,1102,1117,1132,1123,1114,1115,1116,1116,1129,1126,1106,1114,1123,1116,1121,1115,1132,1129,1126,1124,1136,1115,1114,1115,1106,1096,1123,1112,1124,1116,1118,1107,1119,1121,1132,1133,1107,1120,1097,1121,1095,1107,1103,1091,1115,1112,1101,1100,1098,1121,1109,1108,1096,1108,1106,1105,1105,1138,1111,1100,1099,1108,1130,1093,1102,1101,1100,1087,1076,1078,1088,1089,1082,1074,1074,1085,1086,1088,1099,1093,1091,1120,1124,1119,1122,1119,1115,1137,1131,1128,1127,1126,1127,1111,1113,1114,1115,1116,1117,1136,1119,1134,1133,1140,1148,1174,1171,1177,1175,1184,1182,1204,1191,1207,1206,1190,1192,1176,1180,1169,1187,1167,1165,1166,1146,1148,1141,1134,1135,1139,1121,1105,1117,1127,1118,1126,1131,1129,1141,1135,1147,1163,1173,1160,1157,1154,1159,1138,1144,1142,1125,1111,1109,1109,1111,1116,1106,1125,1122,1124,1127,1128,1150,1146,1168,1164,1182,1191,1207,1215};
const uint16_t PROGMEM f2250_10dBm[640]{1423,1423,1193,1414,1175,1169,1359,1262,1254,1157,1336,1333,1149,1327,1325,1248,1324,1244,1321,1151,1247,1246,1148,1245,1244,1317,1239,1236,1232,1305,1128,1302,1224,1123,1221,1215,1293,1111,1205,1213,1290,1290,1112,1207,1110,1287,1287,1111,1205,1101,1197,1273,1188,1265,1262,1260,1173,1254,1252,1248,1247,1245,1162,1246,1246,1160,1242,1156,1239,1236,1231,1229,1225,1224,1219,1213,1125,1206,1317,1126,1207,1204,1201,1200,1198,1197,1196,1193,1191,1188,1181,1350,1288,1344,1165,1165,1286,1164,1162,1284,1282,1159,1157,1336,1274,1270,1268,1262,1258,1130,1127,1249,1245,1242,1298,1298,1297,1238,1234,1292,1110,1236,1292,1289,1285,1282,1280,1219,1097,1211,1207,1264,1265,1205,1201,1199,1196,1083,1258,1197,1194,1192,1251,1189,1191,1189,1250,1190,1247,1185,1181,1288,1285,1234,1233,1233,1282,1227,1161,1166,1165,1276,1225,1224,1226,1225,1226,1225,1222,1221,1160,1160,1222,1218,1217,1153,1265,1211,1211,1210,1147,1210,1147,1147,1208,1260,1206,1203,1202,1201,1198,1198,1137,1200,1136,1197,1133,1193,1133,1197,1197,1137,1201,1200,1197,1250,1192,1192,1188,1240,1183,1180,1234,1177,1231,1231,1230,1274,1230,1232,1181,1185,1184,1187,1241,1185,1125,1236,1181,1180,1233,1177,1177,1176,1119,1178,1178,1121,1178,1232,1121,1232,1233,1231,1231,1179,1178,1176,1118,1226,1171,1223,1221,1111,1162,1212,1160,1159,1160,1159,1157,1158,1157,1156,1102,1101,1202,1149,1201,1199,1197,1195,1193,1233,1182,1178,1175,1174,1217,1215,1165,1211,1161,1160,1158,1155,1153,1152,1152,1149,1147,1192,1189,1144,1185,1181,1132,1172,1170,1224,1165,1161,1214,1116,1157,1147,1200,1104,1195,1191,1185,1126,1174,1169,1116,1201,1160,1162,1197,1152,1188,1151,1147,1181,1178,1180,1143,1216,1143,1211,1177,1139,1209,1208,1207,1170,1204,1166,1199,1195,1160,1123,1187,1183,1180,1146,1144,1141,1138,1136,1162,1158,1125,1154,1154,1151,1181,1153,1154,1182,1125,1152,1122,1148,1148,1146,1170,1139,1132,1194,1152,1148,1141,1174,1167,1161,1180,1176,1176,1171,1166,1138,1157,1154,1150,1170,1122,1120,1141,1143,1122,1142,1165,1140,1160,1156,1132,1175,1149,1141,1156,1148,1171,1140,1186,1182,1175,1176,1177,1178,1179,1180,1132,1131,1180,1176,1175,1172,1147,1161,1179,1157,1155,1152,1132,1153,1130,1149,1128,1168,1129,1182,1141,1176,1174,1152,1194,1165,1162,1157,1152,1147,1171,1165,1178,1156,1172,1172,1174,1190,1173,1158,1134,1161,1176,1189,1151,1160,1169,1175,1169,1198,1187,1179,1189,1184,1178,1191,1177,1179,1152,1167,1185,1173,1163,1165,1165,1165,1179,1177,1156,1165,1173,1166,1173,1165,1185,1182,1180,1175,1189,1164,1165,1166,1154,1143,1175,1163,1177,1167,1168,1156,1171,1171,1187,1187,1158,1171,1145,1173,1143,1156,1152,1138,1165,1163,1149,1150,1146,1171,1159,1159,1144,1158,1156,1156,1153,1192,1163,1147,1147,1159,1183,1140,1151,1149,1148,1135,1122,1124,1134,1136,1126,1118,1119,1133,1133,1134,1145,1141,1138,1172,1174,1170,1175,1169,1167,1191,1184,1183,1180,1180,1182,1163,1164,1164,1166,1169,1170,1188,1172,1189,1187,1195,1204,1229,1228,1234,1231,1240,1237,1261,1249,1262,1259,1246,1248,1233,1235,1228,1243,1224,1223,1224,1200,1202,1196,1188,1187,1192,1172,1153,1166,1178,1167,1175,1185,1181,1194,1189,1200,1217,1227,1216,1212,1209,1214,1194,1199,1197,1175,1157,1159,1156,1161,1165,1155,1177,1172,1174,1178,1181,1204,1200,1222,1220,1240,1247,1263,1271};
const uint16_t PROGMEM f2250_21dBm[640]{2066,1851,1617,1555,1526,1508,1489,1477,1461,1471,1465,1453,1450,1450,1447,1447,1444,1446,1437,1443,1440,1444,1444,1441,1435,1438,1438,1435,1429,1426,1426,1423,1423,1420,1423,1417,1408,1411,1414,1414,1408,1414,1417,1414,1420,1411,1408,1411,1408,1402,1399,1402,1390,1393,1390,1393,1381,1378,1378,1383,1378,1372,1372,1377,1379,1374,1371,1365,1362,1356,1359,1362,1353,1347,1335,1341,1338,1335,1329,1341,1341,1332,1329,1329,1332,1323,1323,1317,1311,1310,1304,1301,1310,1310,1301,1298,1304,1298,1292,1295,1301,1292,1289,1286,1286,1280,1271,1266,1263,1260,1261,1255,1258,1253,1252,1249,1246,1246,1240,1240,1240,1243,1246,1240,1228,1234,1234,1234,1231,1231,1228,1222,1222,1222,1222,1213,1207,1207,1201,1199,1204,1201,1201,1204,1201,1201,1201,1198,1192,1192,1188,1191,1182,1185,1188,1188,1185,1182,1182,1191,1194,1194,1191,1191,1192,1192,1189,1192,1192,1189,1195,1192,1189,1183,1180,1183,1177,1180,1181,1181,1181,1178,1181,1178,1175,1177,1174,1177,1174,1177,1168,1171,1180,1176,1176,1173,1173,1173,1173,1179,1179,1182,1182,1185,1182,1182,1182,1176,1182,1180,1183,1178,1178,1184,1175,1181,1181,1181,1178,1184,1184,1187,1190,1193,1193,1188,1191,1191,1191,1191,1194,1194,1194,1194,1191,1194,1191,1194,1191,1193,1190,1193,1196,1192,1198,1198,1195,1189,1192,1192,1195,1195,1195,1195,1195,1195,1192,1195,1198,1198,1195,1199,1196,1196,1193,1193,1193,1193,1193,1187,1190,1181,1181,1175,1181,1178,1169,1169,1166,1163,1160,1154,1154,1148,1145,1142,1139,1142,1142,1136,1136,1136,1130,1130,1132,1126,1126,1115,1119,1114,1117,1111,1114,1105,1105,1099,1099,1096,1090,1090,1078,1077,1073,1076,1079,1074,1074,1065,1059,1086,1086,1080,1077,1074,1068,1065,1062,1059,1050,1047,1050,1050,1050,1053,1047,1044,1038,1032,1029,1026,1026,1023,1026,1020,1014,1008,1005,1005,1005,1011,2140,2140,2140,2136,2132,2129,2123,2120,2123,2120,2114,2117,2114,2111,2108,2108,2111,2108,2108,2099,2099,2096,2087,2084,2075,2066,2060,2054,2060,2051,2051,2045,2042,2036,2039,2039,2042,2039,2036,2033,2036,2030,2028,2025,2022,2022,2019,2016,2013,2004,2001,1998,1998,2000,1997,1988,1985,1988,1985,1988,1985,1985,1988,1985,1982,1979,1979,1973,1973,1967,1967,1970,1970,1970,1967,1973,1970,1967,1964,1964,1964,1958,1958,1955,1949,1949,1946,1946,1946,1946,1940,1940,1934,1928,1921,1921,1912,1915,1909,1910,1912,1915,1915,1915,1918,1918,1915,1912,1900,1900,1891,1888,1876,1873,1867,1858,1852,1849,1846,1849,1846,1855,1855,1861,1864,1870,1873,1876,1876,1879,1873,1870,1867,1855,1852,1843,1840,1834,1834,1825,1828,1858,1858,1858,1855,1864,1861,1861,1861,1864,1864,1864,1864,1864,1867,1864,1867,1867,1870,1870,1867,1864,1864,1864,1867,1867,1864,1864,1864,1867,1867,1870,1867,1870,1870,1867,1867,1867,1864,1864,1867,1861,1861,1855,1855,1855,1852,1849,1849,1852,1852,1852,1855,1840,1843,1843,1840,1840,1840,1834,1831,1828,1819,1816,1810,1807,1804,1801,1792,1795,1786,1792,1792,1789,1792,1792,1795,1795,1795,1795,1795,1792,1795,1792,1789,1789,1789,1786,1783,1783,1774,1780,1774,1780,1774,1768,1771,1774,1780,1777,1778,1772,1778,1778,1775,1784,1784,1784,1784,1784,1790,1796,1790,1796,1793,1790,1787,1787,1784,1781,1775,1772,1766,1763,1763,1760,1751,1754,1748,1748,1748,1751,1745,1742,1742,1739,1736,1736,1736,1733,1730,1724,1718,1718,1715,1709,1709,1700,1694,1694};

char firmwareVersion[32] = "v1.0.2";

void setup()
{
	Serial.begin(9600);
	SPI.begin();

	pinMode(eeprom_LE, OUTPUT);
	digitalWrite(eeprom_LE, HIGH);

	pinMode(ledPin, OUTPUT);
	digitalWrite(ledPin, LOW);

	SPI.beginTransaction(SPISettings(EXTERNAL_EEPROM_MAX_CLOCK, MSBFIRST, SPI_MODE0));

	registersAndVariables();
	lmxCalibrations();
	f2250Calibrations();

	//// Set Timer1 for Led Blink
	TCCR1B = _BV(WGM13) | _BV(CS11) | _BV(CS10);
	TCCR1A = 0;
	ICR1 = 62500;
	TIMSK1 = _BV(TOIE1);
}

void loop()
{

}

void writeToExEEPROM(uint16_t address, uint8_t data)
{
	// SEND WRITE ENABLE FIRST
	digitalWrite(eeprom_LE, LOW);
	SPI.transfer(EXTERNAL_EEPROM_WREN);
	digitalWrite(eeprom_LE, HIGH);

	digitalWrite(eeprom_LE, LOW);
	SPI.transfer(EXTERNAL_EEPROM_WRITE);
	SPI.transfer((uint8_t)(address >> 8));
	SPI.transfer((uint8_t)(address));
	SPI.transfer(data);
	digitalWrite(eeprom_LE, HIGH);
	delay(10);
}

ISR(TIMER1_OVF_vect)
{
	ledState = !ledState;
  digitalWrite(ledPin, ledState);
}

void registersAndVariables()
{
  writeToExEEPROM(ADF_REG_ADDR, init_ADF4002_Initialization[0]);
  writeToExEEPROM(ADF_REG_ADDR + 1, init_ADF4002_Initialization[1]);
  writeToExEEPROM(ADF_REG_ADDR + 2, init_ADF4002_Initialization[2]);
  writeToExEEPROM(ADF_REG_ADDR + 3, init_ADF4002_Function[0]);
  writeToExEEPROM(ADF_REG_ADDR + 4, init_ADF4002_Function[1]);
  writeToExEEPROM(ADF_REG_ADDR + 5, init_ADF4002_Function[2]);
  writeToExEEPROM(ADF_REG_ADDR + 6, init_ADF4002_R_Counter[0]);
  writeToExEEPROM(ADF_REG_ADDR + 7, init_ADF4002_R_Counter[1]);
  writeToExEEPROM(ADF_REG_ADDR + 8, init_ADF4002_R_Counter[2]);
  writeToExEEPROM(ADF_REG_ADDR + 9, init_ADF4002_N_Counter[0]);
  writeToExEEPROM(ADF_REG_ADDR + 10, init_ADF4002_N_Counter[1]);
  writeToExEEPROM(ADF_REG_ADDR + 11, init_ADF4002_N_Counter[2]);

  for (uint32_t i = 0; i < 126; i++)
  {
    uint32_t a = (i << 16) | LMX_register[i];
    writeToExEEPROM(((3 * i) + 0 + LMX_REG_ADDR), (uint8_t)a);
    writeToExEEPROM(((3 * i) + 1 + LMX_REG_ADDR), (uint8_t)(a >> 8));
    writeToExEEPROM(((3 * i) + 2 + LMX_REG_ADDR), (uint8_t)(a >> 16));
  }

  for (uint8_t i = 0; i < maxSamplesNum; i++)
  {
    uint16_t a1 = sine_waveform[i];
    uint16_t addr = ((2 * i) + 0 + SINE_WAVEFORM_ADDR);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint8_t i = 0; i < maxSamplesNum; i++)
  {
    uint16_t a1 = triangular_waveform[i];
    uint16_t addr = ((2 * i) + 0 + TRIANGLE_WAVEFORM_ADDR);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint8_t i = 0; i < maxSamplesNum; i++)
  {
    uint16_t a1 = ramp_waveform[i];
    uint16_t addr = ((2 * i) + 0 + RAMP_WAVEFORM_ADDR);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint8_t i = 0; i < maxSamplesNum; i++)
  {
    uint16_t a1 = square_waveform[i];
    uint16_t addr = ((2 * i) + 0 + SQUARE_WAVEFORM_ADDR);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

}

void lmxCalibrations()
{
  uint16_t addr1 = LMX_CAL_15;

  for (uint16_t i = 0; i < 640; i++)
  {
    writeToExEEPROM(addr1, pgm_read_word_near(&lmx_15_cal[i]));
    addr1++;
  }

  addr1 = LMX_CAL_21;

  for (uint16_t i = 0; i < 640; i++)
  {
    writeToExEEPROM(addr1, pgm_read_word_near(&lmx_21_cal[i]));
    addr1++;
  }
}

void f2250Calibrations()
{
  for (uint16_t i = 0; i < 640; i++)
  {
    uint16_t a1 = pgm_read_word_near(&f2250_15dBm[i]);
    uint16_t addr = ((2 * i) + F2250_CAL_15);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint16_t i = 0; i < 640; i++)
  {
    uint16_t a1 = pgm_read_word_near(&f2250_14dBm[i]);
    uint16_t addr = ((2 * i) + 0 + F2250_CAL_14);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint16_t i = 0; i < 640; i++)
  {
    uint16_t a1 = pgm_read_word_near(&f2250_13dBm[i]);
    uint16_t addr = ((2 * i) + 0 + F2250_CAL_13);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint16_t i = 0; i < 640; i++)
  {
    uint16_t a1 = pgm_read_word_near(&f2250_12dBm[i]);
    uint16_t addr = ((2 * i) + 0 + F2250_CAL_12);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint16_t i = 0; i < 640; i++)
  {
    uint16_t a1 = pgm_read_word_near(&f2250_11dBm[i]);
    uint16_t addr = ((2 * i) + 0 + F2250_CAL_11);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint16_t i = 0; i < 640; i++)
  {
    uint16_t a1 = pgm_read_word_near(&f2250_10dBm[i]);
    uint16_t addr = ((2 * i) + 0 + F2250_CAL_10);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }

  for (uint16_t i = 0; i < 640; i++)
  {
    uint16_t a1 = pgm_read_word_near(&f2250_21dBm[i]);
    uint16_t addr = ((2 * i) + 0 + F2250_CAL_21);

    uint8_t aa1 = (uint8_t)a1;
    uint8_t aa2 = (uint8_t)(a1 >> 8);
    writeToExEEPROM(addr, aa1);
    addr++;
    writeToExEEPROM(addr, aa2);
  }
}
